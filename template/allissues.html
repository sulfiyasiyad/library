{% extends 'v2admin2.html' %}
{% block content %}
{% load static %}


<!-- <form
  class="w-full flex flex-col sm:flex-row sm:items-center"
  action="allissues"
>
  <label class="text-lg" for="studentID">Search Student :</label>
  <input
    class="w-full sm:w-1/3 px-2 py-1 bg-transparent border-white border-2 mt-4 sm:mt-0 sm:mx-5 rounded text-white placeholder-gray-700"
    type="text"
    name="studentID"
    id="search"
    placeholder="student id only"
  />
  <button
    class="text-white hover:shadow-md rounded mt-4 sm:mt-0 bg-blue-500 px-4 py-1"
  >
    Search
  </button>
</form>

-->
 <!-- <ul class="list-disc px-4 mt-8">
  {% for issue in issues %}
  <li>
    <h3 class="text-xl tracking-wide">
      <span class="font-bold">{{issue.book.book_name}}</span> Issue Requested by
      <a
        target="_blank"
        href="/admin/student/student/{{issue.student.id}}/"
        class="font-bold hover:underline"
      >
        {{issue.user.id}}_{{issue.user.first_name}}</a
      >
    </h3>
    <h4 class="text-xs">Created at:-{{issue.created_at}}</h4>
    <h4 class="text-xs">quantity:-{{issue.quantity}}</h4>
    <div class="flex flex-row w-2/3 space-x-4 mt-4 mb-8">
      {% if user.is_superuser %} {% if issue.issued %}
      <h5 class="w-xs rounded text-md font-bold text-green-500 px-4 py-1">
        Issued
      </h5>
      {%if issue.returned %}
      <h5 class="w-xs rounded font-bold text-green-500 px-4 py-1">Returned</h5>
      {% else %}
      <a
        class="w-xs rounded bg-green-500 px-4 py-1 text-white"
        href="returnbook/{{issue.id}}"
        >return book</a
      >
      {% endif %} {% else %}
      <a
        class="w-xs rounded bg-blue-500 px-4 py-1 text-white"
        href="issuebook/{{issue.id}}"
        >issue book</a
      >
      {% endif %} {% endif %}
    </div>
  </li>
  {% empty %}
  <h2>Nothing Found</h2>
  {% endfor %}
</ul> -->






 <!-- <style>
  @media
only screen 
and (max-width: 760px), (min-device-width: 768px) 
and (max-device-width: 1024px)  { 

   /* Force table to not be like tables anymore */
  table, thead, tbody, th, td, tr {
      display: block;
  }

  /* Hide table headers (but not display: none;, for accessibility) */
  thead tr {
      position: absolute;
      top: -9999px;
      left: -9999px;
  }

tr {
margin: 0 0 1rem 0;
}

tr:nth-child(odd) {
background:  white;
}

  td {
      /* Behave  like a "row" */
      border: none;
      border-bottom: 1px solid #eee;
      position: relative;
      padding-left: 50%;
  }

  td:before {
      /* Now like a table header */
      position: absolute;
      /* Top/left values mimic padding */
      top: 0;
      left: 6px;
      width: 45%;
      padding-right: 10px;
      white-space: nowrap;
  }

  /*
  Label the data
You could also use a data-* attribute and content for this. That way "bloats" the HTML, this way means you need to keep HTML and CSS in sync. Lea Verou has a clever way to handle with text-shadow.
  */
  td:nth-of-type(1):before { content: "First Name"; }
  td:nth-of-type(2):before { content: "Last Name"; }
  td:nth-of-type(3):before { content: "Email"; }
  td:nth-of-type(4):before { content: "Book Name"; }
  td:nth-of-type(5):before { content: "Issued Date"; }
  td:nth-of-type(6):before { content: "Expiry Date"; }
  td:nth-of-type(7):before { content: "Rent"; }
  
  
}
</style>
<div class="container">
      

  <table role="table " border="2px">
      <thead role="rowgroup" style="background-color: blueviolet">
        <tr role="row">
         
          <th role="columnheader">First Name </th>
          
          <th role="columnheader">Book Name</th>
         
          <th role="columnheader">Quantity</th>
          <th role="columnheader">Request</th>
          
          
          
          
          
          
        </tr>
        </thead>
        <tbody role="rowgroup" style="background-color: white">
          {% for issue in issues %}
          <tr role="row">
            <td role="cell">{{ issue.user.first_name }} </td>
            
            <td role="cell">{{issue.book.book_name}}</td>
            
            <td role="cell">{{issue.quantity}}</td>
            <td role="cell">
              {% if user.is_superuser %} {% if issue.issued %}
              <h5 class="w-xs rounded text-md font-bold text-green-500 px-4 py-1">
                Issued
              </h5>
              {%if issue.returned %}
              <h5 class="w-xs rounded font-bold text-green-500 px-4 py-1">Returned</h5>
              {% else %}
              <a
                class="w-xs rounded bg-green-500 px-4 py-1 text-white"
                href="returnbook/{{issue.id}}"
                >return book</a
              >
              {% endif %} {% else %}
              <form action="{% url 'issue_book' issue.id %} "method="post" >
                {% csrf_token %}
              <button class="btn btn-success badge">
              Issue book</a></button></form>
              {% endif %} {% endif %}
            </div>
          </li>
  

          </td>
            
          
            
            
            
           
          </tr>
        {% endfor %}
        
        </tbody>
  </table>
  </div>   -->
 




  <div class="col-lg-9 col-md-8" style="margin-top: 80px;" >
    <u>
    <h2 style="text-align: center;" >Issue Book Here</h2></u>
    <div class="table-responsive">
        <table class="table table-striped">
            <thead class="thead-inverse">
                
                <tr>
               
                  <th scope="col">Name</th>
                  <th scope="col">Book</th>
                  <th scope="col">Quantity</th>
                  <th scope="col">Issue Date</th>
                  <th scope="col">Return Date</th>
                  <th scope="col">Request</th>

                  
               
                </tr>
            </thead>
            <tbody>
              {% for issue in issues %}
              <tr>
                <td >{{ issue.user.first_name }} {{issue.user.last_name }} </td>
                <td >{{issue.book.book_name}}</td>
                <td >{{issue.quantity}}</td>
                <td>{{issue.Issuedate}}</td>
                <td>{{issue.returndate}}</td>
                

                <td>
                  {% if user.is_superuser %} {% if issue.issued %}
                  <h5 class="w-xs rounded text-md font-bold text-green-500 px-4 py-1">
                    Issued
                  </h5>
                  {%if issue.returned %}
                  <h5 class="w-xs rounded font-bold text-green-500 px-4 py-1">Returned</h5>
                  {% else %} 
                 
                  <a href="{% url 'return_book issue.id' %}">return book</a>
                  {% endif %} {% else %}
                  <form action="{% url 'issue_book' issue.id %} "method="post" >
                    {% csrf_token %}
                    <button class="btn btn-success badge">
                      Issue book</a></button></form>
                      {% endif %} {% endif %}
                    </div>
                  </li>
                </td>
              </tr>
             
              {% endfor %}
            </tbody>
          </table> 
        </div>
      </div>
   




   



{% endblock %}